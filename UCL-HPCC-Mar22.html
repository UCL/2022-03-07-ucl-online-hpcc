<!doctype html>
<html lang="en">
<head>
<title>UCL-HPCC-Mar22</title>
<meta name="generator" content="Etherpad">
<meta name="author" content="Etherpad">
<meta name="changedby" content="Etherpad">
<meta charset="utf-8">
<style>
ol {
  counter-reset: item;
}

ol > li {
  counter-increment: item;
}

ol ol > li {
  display: block;
}

ol > li {
  display: block;
}

ol > li:before {
  content: counters(item, ".") ". ";
}

ol ol > li:before {
  content: counters(item, ".") ". ";
  margin-left: -20px;
}

ul.indent {
  list-style-type: none;
}

h1{font-size: 2.5em;}
h2{font-size: 1.8em;}
h3{font-size: 1.5em;}
h4{font-size: 1.2em;}
code{font-family: RobotoMono;}

</style>
</head>
<body>
Welcome to The Carpentries Etherpad!<br><br>This pad is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents.<br><br>Use of this service is restricted to members of The Carpentries community; this is not for general purpose use (for that, try <a href="https&#x3a;&#x2F;&#x2F;etherpad&#x2e;wikimedia&#x2e;org" rel="noreferrer noopener">https:&#x2F;&#x2F;etherpad.wikimedia.org</a>).<br><br>Users are expected to follow our code of conduct: <a href="https&#x3a;&#x2F;&#x2F;docs&#x2e;carpentries&#x2e;org&#x2F;topic&#x5f;folders&#x2F;policies&#x2F;code&#x2d;of&#x2d;conduct&#x2e;html" rel="noreferrer noopener">https:&#x2F;&#x2F;docs.carpentries.org&#x2F;topic_folders&#x2F;policies&#x2F;code-of-conduct.html</a><br><br>All content is publicly available under the Creative Commons Attribution License: <a href="https&#x3a;&#x2F;&#x2F;creativecommons&#x2e;org&#x2F;licenses&#x2F;by&#x2F;4&#x2e;0&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by&#x2F;4.0&#x2F;</a><br><br>&nbsp;----------------------------------------------------------------------------<br>&nbsp;<br>&nbsp;<br><h1>Using this Etherpad</h1><br>If you want to add to this document, just click anywhere and start typing! You can use the buttons at the top left to make things <strong>bold</strong>, <em>italic</em> <u>etc.</u><br><ul class="bullet"><li>or</li><li>make</li><li>lists...</ul><br><code>You can also add bits of code...</code><br>... by clicking the drop down menu that says &quot;Normal&quot;.<br><br>You can add your name to the Users on the top right and click the &quot;Settings&quot; wheel symbol at the top right to change the font, show a table of contents, show or hide line numbers and authorship colours or show the chat.<br><br><h2>During the course</h2><br>We will use this document to introduce ourselvels, keep some notes, and have discussions.<br><br>You can ask questions here or in Zoom, the helpers will try to answer and help with any problems.<br><br><h1>Setup</h1><br><ol start="1" class="number"><li><strong>Pre-workshop survey </strong>- please complete this short survey to help us design the workshop to work for you: <a href="https&#x3a;&#x2F;&#x2F;carpentries&#x2e;typeform&#x2e;com&#x2F;to&#x2F;wi32rS&#x3f;slug&#x3d;2022&#x2d;03&#x2d;07&#x2d;ucl&#x2d;online&#x2d;hpcc" rel="noreferrer noopener">https:&#x2F;&#x2F;carpentries.typeform.com&#x2F;to&#x2F;wi32rS?slug=2022-03-07-ucl-online-hpcc</a></li><li><strong>Please read The Carpentries Code of Conduct</strong> so that we all are aware of how to treat each other respectfully: <a href="https&#x3a;&#x2F;&#x2F;docs&#x2e;carpentries&#x2e;org&#x2F;topic&#x5f;folders&#x2F;policies&#x2F;code&#x2d;of&#x2d;conduct&#x2e;html" rel="noreferrer noopener">https:&#x2F;&#x2F;docs.carpentries.org&#x2F;topic_folders&#x2F;policies&#x2F;code-of-conduct.html</a></li><li><strong>Research Computing account</strong> - please fill in the form and note that students will need approval of their supervisor, so please remind your supervisor to look out for an email and complere the request: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rc&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;docs&#x2F;Account&#x5f;Services&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;www.rc.ucl.ac.uk&#x2F;docs&#x2F;Account_Services&#x2F;</a></li><li><strong>Bash shell </strong>- follow the setup instructions for your operating system on bottom of the course webpage:<a href="http&#x3a;&#x2F;&#x2F;github&#x2d;pages&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;2022&#x2d;03&#x2d;07&#x2d;ucl&#x2d;online&#x2d;hpcc&#x2F;" rel="noreferrer noopener">http:&#x2F;&#x2F;github-pages.ucl.ac.uk&#x2F;2022-03-07-ucl-online-hpcc&#x2F;</a></li><li><strong>SSH client </strong>- if you are using a Linux operating system you will have an SSH client installed and don&#x27;t need to do anything. If you are using Windows or MacOS please follow the instructions here:</ol><ul class="bullet"><li><strong>Windows: </strong>Install MobaXterm from <a href="http&#x3a;&#x2F;&#x2F;mobaxterm&#x2e;mobatek&#x2e;net" rel="noreferrer noopener">http:&#x2F;&#x2F;mobaxterm.mobatek.net</a>. You should get the Home edition (Installer edition).</li><li><strong>macOS</strong>: Install XQuartz to enable graphical support. Note that you must restart your computer to complete the installation: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;xquartz&#x2e;org&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;www.xquartz.org&#x2F;</a></ul><br><h1>Links</h1><br><ul class="bullet"><li>Main course webpage: <a href="http&#x3a;&#x2F;&#x2F;github&#x2d;pages&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;2022&#x2d;03&#x2d;07&#x2d;ucl&#x2d;online&#x2d;hpcc&#x2F;" rel="noreferrer noopener">http:&#x2F;&#x2F;github-pages.ucl.ac.uk&#x2F;2022-03-07-ucl-online-hpcc&#x2F;</a></li><li>Zoom link to access the course: <a href="https&#x3a;&#x2F;&#x2F;ucl&#x2e;zoom&#x2e;us&#x2F;j&#x2F;95027952157&#x3f;pwd&#x3d;a0RtaXM0RmNGSWc2L081U1U0WnJtQT09" rel="noreferrer noopener">https:&#x2F;&#x2F;ucl.zoom.us&#x2F;j&#x2F;95027952157?pwd=a0RtaXM0RmNGSWc2L081U1U0WnJtQT09</a></ul><br><ul class="bullet"><li>Pre-workshop survey: <a href="https&#x3a;&#x2F;&#x2F;carpentries&#x2e;typeform&#x2e;com&#x2F;to&#x2F;wi32rS&#x3f;slug&#x3d;2022&#x2d;03&#x2d;07&#x2d;ucl&#x2d;online&#x2d;hpcc" rel="noreferrer noopener">https:&#x2F;&#x2F;carpentries.typeform.com&#x2F;to&#x2F;wi32rS?slug=2022-03-07-ucl-online-hpcc</a></li><li>Post-workshop survey:<a href="https&#x3a;&#x2F;&#x2F;carpentries&#x2e;typeform&#x2e;com&#x2F;to&#x2F;UgVdRQ&#x3f;slug&#x3d;2022&#x2d;03&#x2d;07&#x2d;ucl&#x2d;online&#x2d;hpcc" rel="noreferrer noopener">https:&#x2F;&#x2F;carpentries.typeform.com&#x2F;to&#x2F;UgVdRQ?slug=2022-03-07-ucl-online-hpcc</a></ul><br><ul class="bullet"><li>Code of conduct: <a href="https&#x3a;&#x2F;&#x2F;docs&#x2e;carpentries&#x2e;org&#x2F;topic&#x5f;folders&#x2F;policies&#x2F;code&#x2d;of&#x2d;conduct&#x2e;html" rel="noreferrer noopener">https:&#x2F;&#x2F;docs.carpentries.org&#x2F;topic_folders&#x2F;policies&#x2F;code-of-conduct.html</a></li><li>More information on Research Computing at UCL, including Thomas and Myriad: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rc&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;docs&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;www.rc.ucl.ac.uk&#x2F;docs&#x2F;</a></li><li><strong>Other training opportunities</strong>: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;isd&#x2F;services&#x2F;research&#x2d;it&#x2F;research&#x2d;it&#x2d;training" rel="noreferrer noopener">https:&#x2F;&#x2F;www.ucl.ac.uk&#x2F;isd&#x2F;services&#x2F;research-it&#x2F;research-it-training</a></li><li>Join the Research Programming Hub: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;research&#x2d;it&#x2d;services&#x2F;ucl&#x2d;research&#x2d;programming&#x2d;hub" rel="noreferrer noopener">https:&#x2F;&#x2F;www.ucl.ac.uk&#x2F;research-it-services&#x2F;ucl-research-programming-hub</a> You can join mailing lists and the Slack workspace where you can discuss programming with others across the University, get help with your code and hear about new training opportunities.</ul><br><ul class="bullet"><li>If you want advice later on how to run your code on the UCL HPC systems pelase contact rc-support@ucl.ac.uk</ul><br><br><h1>Day 1 - Monday 7th March</h1><br><strong>Instructor:</strong> Krishnakumar Gopalakrishnan<br><strong>Helpers: </strong>Sarah Jaffa, Maria (Mary) Tziraki, Anika Cawthorn, Valerie Crolley, Giannis Savva<br><br><h2>Schedule</h2><br><ul class="indent"><li>09:30&nbsp; (Optional) Help with setup issues&nbsp;&nbsp;</li><li>10:00&nbsp; Introduction</li><li>10:15&nbsp; Using the shell in a HPC context&nbsp;</li><li>10:55&nbsp; Morning break&nbsp;&nbsp;</li><li>11:05&nbsp; Using the shell in a HPC context&nbsp;</li><li>11:55&nbsp; 2nd Morning break&nbsp;&nbsp;</li><li>12:05&nbsp; Using the shell in a HPC context&nbsp;</li><li>12:55&nbsp; Wrap-up&nbsp;</li><li>13:00&nbsp; END</ul><br><h2>Introductions</h2><br><br>Please add your name, what department you work in and how you hope to use HPC in your work<br><br><ol start="1" class="number"><li>&nbsp;Andrei&nbsp; (Physics and Astronomy), gonna run a heavy MPI fortran code for my post-doc</li><li>&nbsp;Michael B (Brain Sciences[neuroinflammation]), supporting researchers&#x2F;clinicians&#x2F;etc running HPC analysis</li><li>&nbsp;Santiago (Biosciences), will train neural network models for bioacoustic sound event detection.</li><li>&nbsp;Sarah Jaffa (helper, Advanced Research Computing), I run courses on HPC skills and use it to run big data analysis pipelines very quickly.</li><li>&nbsp;Roi Maor (GEE), would like to run scripts with multiple iterations of alternative phylogentic and ecological data in order to quantify the variance in model results.</li><li>&nbsp;Arundhati Maitra (IGH), I am planning to do secondary analysis on transcriptomic data available on public databases.</li><li>&nbsp;Anika (helper, Advanced Research Computing), I use the HPC cluster for compute intense analysis</li><li>&nbsp;Jessica Williams (Biosciences, Centre for Biodiversity and Environment Research), I hope to use HPC for running analyses, in particular bayesian networks.</li><li>&nbsp;Ella Browning (GEE, Centre for Biodiversity and Environment Research), I would like to use HPC to run large scale spatio-temporal statistical analyses under a Bayesian framework.&nbsp;</li><li>Jamie Quinn (Instructor, UCL) I use GPUs to accelerate fluid dynamics simulations</ol><br><br><br><h2>Notes</h2><br><br>Commands:<br><ul class="bullet"><li><strong>hostname</strong> - returns what computer (host) you are currently logged on to</li><li><strong>clear </strong>- empty the terminal</li><li><strong>ls</strong> - list the files and folders in the current folder<ul class="bullet"><li>ls -a - list all the files and folders including hidden ones (start with a .)</li><li>ls -l - long list (gives more details such as date created, size, owner)</li><li>ls -F - displays directories with a trailing &#x2F;</ul><li><strong>pwd</strong> - show where the present working directory is located</li><li><strong>whoami</strong> - returns your username</li><li><strong>mkdir</strong> - create a new directory<ul class="bullet"><li>mkdir folder-of-stuff - makes a new folder called &quot;folder-of-stuff&quot; (tip: don&#x27;t use spaces)</ul><li><strong>cd</strong> - change directory (move to a different folder)<ul class="bullet"><li>cd&nbsp;&nbsp;&nbsp;&nbsp; (cd with no extra arguments) go to the home directory</li><li>cd ~ - go to the home directory</li><li>cd - (cd then the minus symbol) - go to the directory you were in before</li><li>cd .. - go to the parent folder of your current folder</ul><li><strong>man </strong>- short for manual, displays help text for any command<ul class="bullet"><li>man &lt;command&gt; - show help for a particular command (e.g. &#x27;man ls&#x27; to show help for ls)</ul><li>Pager (the window that shows lots of text, like the man pages) has several commands to move about:<ul class="bullet"><li>f - move a page forwards</li><li>b - move a page backwards</li><li>&#x2F; - search for a particular word<ul class="bullet"><li>n to go to the next instrance of your search</li><li>N to go to the previous instance of your search</ul><li>q to quit the pager</ul><li><strong>nano </strong>- Opens nano, like notepad for the command line (good for simple text edits)<ul class="bullet"><li>If you get an error saying &#x27;command not found&#x27; , enter &#x27;module load nano&#x27; then try again</li><li>&quot;^C&quot; means CTRL+C. Likewise for other &quot;^[key]&quot; options CTRL+[key].&nbsp;</li><li>&quot;M-B&quot; means ALT+B. Likewise for other &quot;M-[key]&quot; options being ALT+[key]</li><li>To open a file that already exisits use &#x27;nano &lt;filename&gt;&#x27;</ul><li><strong>cat &lt;textfile&gt;</strong> - show the contents of a text file (short for concatenate)</li><li><strong>mv &lt;oldfile&gt; &lt;newfile&gt;</strong> - moves or renames a file<ul class="bullet"><li>To keep the exisitng name you can use &quot;mv &lt;oldfile&gt; &lt;newdirectory&gt;&quot; to keep the same name but change the location to &lt;newdirectory&gt;</ul><li><strong>cp &lt;currentfile&gt; &lt;copyfile&gt;</strong> - makes a copy of &lt;currentfile&gt; called &lt;copyfile&gt;</li><li><strong>rm &lt;file&gt; </strong>- delete (remove) a file (BE CAREFUL as there is no recycle bin, you cannot get this back)<ul class="bullet"><li>rm -r - recursive delete (delete a directory and delete everything inside it including other directories and things inside them)</li><li>rm -v - verbose means return the names of the things being deleted</ul><li><strong>rmdir &lt;directory&gt;</strong> - delete (remove) an empty folder (directory)</li><li><strong>touch &lt;filename&gt;</strong> - create empty file with the given filename</ul><br><br><ul class="bullet"><li>Commands often take the format &quot;command [options] [arguments]&quot;<ul class="bullet"><li>e.g. command ls to list files, option -a to ask for &quot;all&quot;, argument ~ to mean home<ul class="bullet"><li>ls -a ~</ul><li>You can use many options together like this:<ul class="bullet"><li>ls -a -l is the same as</li><li>ls -l -a (order doesn&#x27;t matter) is the same as</li><li>ls -al (combine the options together)</ul></li></ul></li></ul><br><br>Tips:<br><ul class="bullet"><li>Tab key will autocomplete commands, file names etc.</li><li>Man pages (manual) are long and can be hard to read. If you are using the Bash shell a lot you might want to install a new command tldr which gives shorter less detailed hepl text (<a href="https&#x3a;&#x2F;&#x2F;github&#x2e;com&#x2F;tldr&#x2d;pages&#x2F;tldr" rel="noreferrer noopener">https:&#x2F;&#x2F;github.com&#x2F;tldr-pages&#x2F;tldr</a>)</li><li>If you get stuck in a command or screen you don&#x27;t want to be in, try pressing q or Ctrl-C (Cmd-C on mac)</li><li>Up arrow shows the last command you entered (and you can keep going as far back as you like)</li><li>Most (but not all) commands have an option --help that will give a shorter help text than the man pages.</li><li>For a more advanced way of listing files and folders, have a look at the command &#x27;tree&#x27; <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;tecmint&#x2e;com&#x2F;linux&#x2d;tree&#x2d;command&#x2d;examples&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;www.tecmint.com&#x2F;linux-tree-command-examples&#x2F;</a></li><li>File extensions (the bit after the dot) are not really important in the Bash shell. The give you a clue what find of file it is (.txt is probably text, .doc is probably a word file, .png is probably a picture) but in the shell you will choose how to read or open the file yourself. This is different on Windows and Mac where the extension tells the computer wehat program to open it with - if you click on a file called .png the computer will try to open it as a picture, whether it is really a picture or not.</li><li>There are shortcuts to reference multiple files in commands once you get more comfortable. To reference files with sequential numbers, you can use {#..#}, e.g. &quot;touch file{1..4}.txt&quot; creates file1.txt, file2.txt, etc. Similarly, * allows for &quot;anything&quot; e.g. &quot;cp *.txt ~&#x2F;&quot; will copy all files ending in .txt to the ~&#x2F; directory. These can be combined e.g. &quot;rm test{3..5}*&quot; will remove all files starting with test3, test4 or test5; files such as test3.png, test3final.docx or test5second.txt would be removed but files such as test1.txt or tester5.txt would not be removed.</ul><br><br><br><br><br><h3>Questions and comments</h3><br>Please add any questions or comments here<br><br><ul class="bullet"><li>&nbsp;Will the document that the helpers are working off of (the one with the questions on and also some instructions) be shared with us? - Yes, at the end.</li><li>&nbsp;</li></ul><br><br><br><br><h2>Feedback from day 1</h2><br>Please give us some feedback here:<br><a href="https&#x3a;&#x2F;&#x2F;ideaboardz&#x2e;com&#x2F;for&#x2F;uclhpcc&#x2d;mar22&#x2F;4371989" rel="noreferrer noopener">https:&#x2F;&#x2F;ideaboardz.com&#x2F;for&#x2F;uclhpcc-mar22&#x2F;4371989</a><br><br>Please let us know&nbsp;<br><ul class="bullet"><li>something that went well today (maybe something you learned that will be very useful to your work)</li><li>something we can improve (maybe something that you found made it more difficult for you to learn, or a command where you got stuck or confused)</ul><br>Press the green plus symbol to add a new note or click on a note to add a +1 to someone else&#x27;s comment.<br><br><h1>Day 2 - Tuesday 8th March</h1><br><strong>Instructor:</strong> Jamie Quinn<br><strong>Helpers: </strong>Sarah Jaffa, Krishna Gopalakrishnan, Giannis Savva, Themis Kotsialos<br><br><h2>Schedule</h2><br><ul class="indent"><li>09:30&nbsp; (Optional) Help with issues from day 1</li><li>10:00&nbsp; Using the shell in a HPC context (coninued)</li><li>10:55&nbsp; Morning break&nbsp;&nbsp;</li><li>11:05&nbsp; Introduction to HPC</li><li>11:55&nbsp; 2nd Morning break&nbsp;&nbsp;</li><li>12:05&nbsp; Introduction to HPC</li><li>12:55&nbsp; Wrap-up&nbsp;</li><li>13:00&nbsp; END</ul><br><br><h2>Notes</h2><br><br><code>wget <a href="http&#x3a;&#x2F;&#x2F;rits&#x2e;github&#x2d;pages&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;hpc&#x2d;shell&#x2F;files&#x2F;bash&#x2d;lesson&#x2e;tar&#x2e;gz" rel="noreferrer noopener">http:&#x2F;&#x2F;rits.github-pages.ucl.ac.uk&#x2F;hpc-shell&#x2F;files&#x2F;bash-lesson.tar.gz</a></code><br>gr<br><br><ul class="bullet"><li><strong>wget </strong>is a command-line downloader that can be used to download files from the WWW. If you have the direct URL to a specific file, you can copy the URL from your browser, and then type: &quot;wget &lt;full url&gt;&quot; to download the file to the current directory</li><li><strong>tar -xvzf &lt;filename.tar.gz&gt;</strong>: uncompress a comressed file. The options mean : -x extract, -v&nbsp; verbose (print the names of files it extracts), -z instructs tar to expect gzip compression,&nbsp; and -f tells it to expect a filename argument (not from a tape. tar originally stood for &quot;tape archive&quot;).</li><li><strong>head -n 15</strong>:&nbsp; Print the first 15 lines of a text file (for example). If the option is omitted, it shows the first 10 lines by default</li><li><strong>tail -n 12</strong>:&nbsp; Print the last 12 lines of a text file (for example). If the option is omitted, it shows the last 10 lines by default</li><li><strong>less &lt;filename&gt;</strong>: Opens the file in a file viewer you can scroll with f&#x2F;b or the arrow keys, in the same way as the man pages (&quot;pager&quot;)</li><li>Within the less pager,&nbsp; pressing -N followed by enter will toggle line wrap (useful for long lines)</li><li><strong>wc &lt;file&gt;</strong>: Count the lines or words in a file. By default is counts words, you can use the -l option to count lines.</li><li>In a string pattern, * is a wildcard which means zero or more matching characters</li><li><strong>echo &lt;something&gt; </strong>: echo means to return whatever you give it, so it prints back whatever you put as the argument</li><li>stdout and stderr are the two streams to which the commands can write their output</li><li>stdout is the standard output stream, which is usually the console (screen). Content on the standard output can be redirected to a file by using the `&gt;` operator e.g.&nbsp; command&nbsp; &gt; filename. This will destructively replace the existing content in the file</li><li>stderr is the standard error stream. This is also usually the console (screen), but can be redirected&nbsp; to a separate file by using `2&gt;`&nbsp; e.g. command 2&gt; errorfile.txt</li><li>You can append to existing content by using the &gt;&gt; operator e.g. command &gt;&gt; file_to_overwrite.txt</li><li>The output and error streams can be combined by using the &amp;&gt; operator e.g. command &amp;&gt; file_with_errors_and_outputs.txt</li><li>stdin is the name of the standard input stream (usually represents characters from either the keyboard or&nbsp; read in from a file)</li><li><strong>grep &lt;pattern&gt;</strong> <strong>&lt;file&gt;</strong>: looks for &lt;pattern&gt; in the &lt;file&gt;, e.g. grep author paper.txt</li><li>vertical line charachter <strong>|</strong> is used to pass the output of the left-hand side command as an input to&nbsp; the right-hand side command, e.g. grep author paper.txt <strong>|</strong> wc -l</li><li>a script is a file with a collection of commands that are executed in order.</li><li>The first line in a script shows the program that will run the script, here we use bash so the appropriate line is <strong>#!&#x2F;bin&#x2F;bash</strong></li><li>To execute a script, the user (owner of the script) needs to have permission to execute it</li><li>To check permissions for the user, group and everyone else, type<strong> ls -l</strong></li><li>In a script, variables are defined as: <strong>variable_name</strong>=<strong>value</strong>, with no spaces around the&nbsp; <strong>=</strong> sign</li><li>Variables are used as <strong>$variable_name</strong>,<strong> </strong>note the $ sign in front of the variable&#x27;s name</li><li>A script can take input from the user. Inside the script, the 1st input argument is used as $1, the 2nd as $2, etc&nbsp;</li><li>Scripts may also contain loops. to iterate over a list of things:<ul class="bullet"><li><strong>for</strong> VAR <strong>in</strong> first second third &quot;fourth and fifth&quot; ....&nbsp;&nbsp;</li><li>the list of things is separated by a space</li><li>quotes are needed if an entity in the list contains spaces itself</ul><li>The list of things to loop over can be obtained using wildcards, for example, to iterate&nbsp; over all txt files in the current directory:&nbsp;<ul class="bullet"><li><strong>for</strong> VAR <strong>in</strong> *.txt</ul><li>Curly brackets {...} are a useful way to use a variable name to avoid any ambiguities<ul class="bullet"><li>suppose that you have variables <strong>FILE</strong> and <strong>FILE_processed</strong> and you would like to append &quot;_processed&quot; to the FILE variable</li><li>echo <strong>${FILE}_processed</strong>, adds the &quot;_processed&quot; to the variable <strong>FILE</strong></li><li>echo <strong>$FILE_processed</strong> refers to the already existing variable</ul></li></ul><br><br><h2>HPC notes</h2><br><ul class="bullet"><li>&nbsp;qhost : lists the nodes available on the system you are using</li><li>nodetypes: a summary of all nodes available in the cluster, grouped by type.</ul>&nbsp;<br>&nbsp;<br>&nbsp;<br><h2>Exercises</h2><br><br><strong>Ex 1</strong><br><br>You can even use multiple *s at a time. How would you run wc -l on every file with &#8220;fb&#8221; in it?<br>can use double *, one before and one after like wc -l *fb*<br><br><strong>Ex 2</strong><br><br>Create a folder called &#8220;fastq&#8221; and move all of our .fastq files there in one mv command.<br>(for better results, you might want to be in the directory that you extracted the .tar.gz file ...)<br><br><strong>Ex 3</strong><br><br>How many files are there in the &#8220;fastq&#8221; directory we made earlier? (use ls, a pipe and wc)<br><ul class="indent"><li>ls fastq&#x2F; | wc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (potentially)</ul>(you might also want to use &quot;ls -1 | wc -l&quot;&nbsp; (first is &quot;one&quot;, second is &quot;el&quot;)<br><br><strong>Ex 4</strong><br><br>Let&#8217;s compress one of our files using gzip:<br><br>gzip gene_association.fb<br><br>`zcat` acts like `cat`, except that it can read information from `.gz` (compressed) files. Using `zcat`, can you write a command to take a look at the top few lines of the `gene_association.fb.gz` file (without decompressing the file iitself)?&nbsp;<br>(first, execute the gzip command above; then use zcat with that new file and a pipe ... )<br><br><br>zcat gene_association.fb.gzcd | head<br><br>zcat gene_association.fb.gz | head<br><br><strong>Ex 5</strong><br><br><code>cd to our fastq directory from earlier and write a loop to print off the name and top 4 lines of every fastq file in that directory.</code><br><code>&nbsp;&nbsp;</code><br>Is there a way to only run the loop on fastq files ending in _1.fastq?<br><br>#!&#x2F;bin&#x2F;bash<br>#list all files, then only keep results that contain _1.fastq<br>FILELIST=$(ls -1|grep _1.fastq)<br>for FILE in $FILELIST<br>do<br>&nbsp;&nbsp;&nbsp; echo $FILE&nbsp;<br>&nbsp;&nbsp;&nbsp; head -n 4 $FILE<br>done<br><br>^ missed the pattern matching * above ... there is no filename named _1.fastq, but there are the ones that contain that part of filename ...&nbsp;<br><br>(grep returns all results containing, should&#x27;ve used wildcard but was cheating as there are no &quot;_1.fastq&quot; *not* at the end), &quot;ls | grep [pattern]&quot; takes the result of ls, then does grep to filter down<br><br>???<br>[coursa1@login12 hpc-test]$ cd fastq&#x2F;<br>[coursa1@login12 fastq]$ ls<br>SRR307023_1.fastq&nbsp; SRR307025_1.fastq&nbsp; SRR307027_1.fastq&nbsp; SRR307029_1.fastq<br>SRR307023_2.fastq&nbsp; SRR307025_2.fastq&nbsp; SRR307027_2.fastq&nbsp; SRR307029_2.fastq<br>SRR307024_1.fastq&nbsp; SRR307026_1.fastq&nbsp; SRR307028_1.fastq&nbsp; SRR307030_1.fastq<br>SRR307024_2.fastq&nbsp; SRR307026_2.fastq&nbsp; SRR307028_2.fastq&nbsp; SRR307030_2.fastq<br><br><br>#!&#x2F;bin&#x2F;bash<br><br><br>FILES=$(ls)<br><br>for FILE in $FILES<br>do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo $FILE<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; head -n 4 $FILE<br>done<br><br><strong>SOLUTION (with extra bit for only _1.fastq files)</strong><br><code>#!&#x2F;bin&#x2F;bash</code><br><code>for FILE in *_1.fastq</code><br>do<br><code>&nbsp;&nbsp; echo $FILE</code><br><code>&nbsp;&nbsp; head -n 4 $FILE</code><br>done<br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><br><strong>Ex 6</strong><br><br>Concatenating (i.e. mashing together) variables is quite easy to do. Add whatever you want to concatenate to the beginning or end of the shell variable after enclosing it in {} characters.<br><code>&nbsp;&nbsp;</code><br><code>FILE=stuff.txt</code><br>echo ${FILE}.example<br><code>&nbsp;&nbsp;</code><br><code>stuff.txt.example</code><br><code>&nbsp;&nbsp;</code><br>Can you write a script that prints off the name of every file in a directory with &#8220;.processed&#8221; added to it?<br><br><strong>Ex 7</strong><br><br>Try to find out the number of CPUs and amount of memory available on your personal computer.<br><br>for win:<br>Launch Windows PowerShell as an administrator, enter the command:<br>systeminfo<br><br>Linux&#x2F;Mac: `nproc` `free -h`<br><br>cat &#x2F;proc&#x2F;cpuinfo<br><br>4 phys (8 logical) cores,&nbsp; 8gb ram<br>nproc = 8, free memory = 30G<br><br>2 cores, 4 logical, 8GB RAM<br>2 cores, 4 logical, 16GB RAM<br>6 real+logical cores, 16G RAM<br>4 cores 8 logical<br><br><strong>Ex 8</strong><br><br><code>qhost -h &lt;hostname&gt;</code><br><br>login 12, 36 cores, load 4.85, 188.4G total memory<br><br>login13 36 cores, load 2.75, 188.4G&nbsp;<br><br>node-d00b-009, 36 cores, 188.4G RAM, 4.85 load<br><br>node-l00a-004 - 36 cores, 188.4GB RAM, 26.29 load,<br><br>node-d00a-125 - 36c, 188.4G, using 28.7G, loaded cores 29.97<br><br><br><br><h3>Questions and comments</h3><br>Please add any questions or comments here<br><br><ul class="bullet"><li>&nbsp;</li><li>&nbsp;</li></ul><br><h2>Feedback from day 2</h2><br>Please give us some feedback here:<br><a href="https&#x3a;&#x2F;&#x2F;ideaboardz&#x2e;com&#x2F;for&#x2F;uclhpcc&#x2d;mar22&#x2F;4371989" rel="noreferrer noopener">https:&#x2F;&#x2F;ideaboardz.com&#x2F;for&#x2F;uclhpcc-mar22&#x2F;4371989</a><br><br>Please let us know&nbsp;<br><ul class="bullet"><li>something that went well today (maybe something you learned that will be very useful to your work)</li><li>something we can improve (maybe something that you found made it more difficult for you to learn, or a command where you got stuck or confused)</ul><br>Press the green plus symbol to add a new note or click on a note to add a +1 to someone else&#x27;s comment.<br><br><h1>Day 3 - Wednesday 9th March</h1><br><strong>Instructor:</strong> Heather Kelly<br><strong>Helpers: </strong>Sarah Jaffa, Themis Kotsialos, Valerie Crolley<br><br><h2>Schedule</h2><br><ul class="indent"><li>09:30&nbsp; (Optional) Help with issues from day 2&nbsp;</li><li>10:00&nbsp; Introduction to High-Performance Computing (Continued)&nbsp;&nbsp;</li><li>10:55&nbsp; Break&nbsp;&nbsp;</li><li>11:05&nbsp; Introduction to High-Performance Computing (Continued)&nbsp;&nbsp;</li><li>11:55&nbsp; Break&nbsp;&nbsp;</li><li>12:05&nbsp; Introduction to High-Performance Computing (Continued)&nbsp;&nbsp;</li><li>13:00&nbsp; Lunch break&nbsp;&nbsp;</li><li>14:00&nbsp; Hands-on exercise&nbsp;&nbsp;</li><li>14:55&nbsp; Break&nbsp;&nbsp;</li><li>15:05&nbsp; Hands-on exercise (Continued)&nbsp;&nbsp;</li><li>16:30&nbsp; Wrap-up&nbsp;&nbsp;</li><li>16:45&nbsp; Post-workshop Survey&nbsp;</li><li>17:00&nbsp; END</li></ul><h2>Notes</h2><br><ul class="bullet"><li>If you are outside the UCL network (not physically on site) you will need to get onto the network before accessing Myriad. You can log into Socrates from outside the network then access Myriad from there. See Research Computing documentation for more info: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rc&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;docs&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;www.rc.ucl.ac.uk&#x2F;docs&#x2F;</a></li><li>The scheduler organises which jobs run on which nodes (Like a head waiter at a restaurant). Most scheduler commands begin with the letter q</li><li>Priority of allocating nodes might be given to a larger job before a smaller one (as otherwise the larger job would wait forever for enough nodes); it&#x27;s not first-come-first-serve. Similarly, shorter requested time (see h_rt) will speed up job allocation!</li><li>The queue system used is &quot;Sun Grid Engine&quot;</li><li>The first line in a job script shows the program that will run the script and that we want the &#x27;login&#x27; environment on Myriad: <strong>#!&#x2F;bin&#x2F;bash -l or #!&#x2F;bin&#x2F;bash --login</strong></li><li><strong>qsub</strong> : To submit a job script (Bash script with instructions for your job) to the scheduler</li><li><strong>qstat</strong> : Check the status of your job on the scheduler. This will tell you the job name and whether it is in the queue, running, or finished</li><li><strong>qdel &lt;jobnumber&gt;</strong> : Delete a job from the queue (e.g. made by mistake, in eqw state)<ul class="bullet"><li>This works on jobs whether they have started to run or not</li><li>You can delete all jobs you have submitted using: qdel -u &lt;yourusername&gt; &#x27;*&#x27;</ul><li><strong>qexplain &lt;jobnumber&gt;</strong> : more detailed information on a job, useful if job failed</li><li><strong>qrsh &lt;options&gt;</strong> : Run an &quot;interactive&quot; node session (you can type commands and respond to prompts directly)<ul class="bullet"><li>May require use of &quot;-now no&quot; option, which tells it to wait as long as it takes to get a free session</ul><li><strong>watch</strong> : repeat a command to update hte output if you want to see when it changes.<ul class="bullet"><li>watch -n 15 qstat : run the qstat command every 15 seconds to update the output so you can see when it runs. Don&#x27;t use this often as it uses a lot of resources.</ul><li><strong>jobhist</strong> : Shows a history of run jobs, including start and end time, node used and exit code</li><li>Output will be sent to two files called &lt;jobscriptname&gt;.e&lt;jobnumber&gt; for the stderr (standard error) stream, where all warnings and errors will go, and &lt;jobscriptname&gt;.o&lt;jobnumber&gt; for the stdout (standard output) stream, where the output of your code will go.<ul class="bullet"><li>We talked yesterday about redirecting stdout and stderr using &gt; or &amp;&gt;, so inside your script you can send these to a different file</ul><li>Anything in your Bash script starting with a # will be seen as a comment, so Bash will not run these lines <strong>but</strong> job scripts are special... If a line starts with #$ Bash will ignore it as a comment, but the <strong>scheduler</strong> will find it and read it as an instruction about scheduling. More details on these is available here: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rc&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;docs&#x2F;Experienced&#x5f;Users&#x2F;&#x23;script&#x2d;sections" rel="noreferrer noopener">https:&#x2F;&#x2F;www.rc.ucl.ac.uk&#x2F;docs&#x2F;Experienced_Users&#x2F;#script-sections</a><ul class="bullet"><li>#$ -N &lt;script_name&gt; : adding this line at the start of your script will give your job that name within the queue system&nbsp;</li><li>#$ -m abe : send an email when the job (b)egins, (a)borts or (e)nds</li><li>#$ -M &lt;email@email.com&gt; : The address to send the messages to.</li><li>#$ -pe smp # : request a number of cores for the job</li><li>#$ -l &lt;option&gt; : &quot;limit&quot; resource specified<ul class="bullet"><li>mem=#G : limit to this much memory per-core</li><li>h_rt=hh:mm:ss : limit runtime to be upto the specified (h)ours,(m)ins, (s)econds</ul><li>#$ -wd &lt;dir&gt; : changes &quot;working directory&quot; to the given directory (where to run)</li><li>#$ gpu=1 : request one GPU</ul><li>There are some example jobscripts for different types of jobs here: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rc&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;docs&#x2F;Example&#x5f;Jobscripts" rel="noreferrer noopener">https:&#x2F;&#x2F;www.rc.ucl.ac.uk&#x2F;docs&#x2F;Example_Jobscripts</a> A good way to start is to copy one of theses and edit it to fit your needs.</li><li>scriptfor &lt;jobnumber&gt; shows the script that was submitted for a particular job number (even if you have since changed or deleted the file)</li><li>lustre is the name of the place where the home directory is stored. If you see a working directory like &#x27;&#x2F;lustre&#x2F;home&#x2F;your_username&#x27; that is the same place we previously looked at &#x27;&#x2F;home&#x2F;your_username&#x27;.</li><li>There are alternative systems to Myriad, if you have data security or other requirements Myriad cannot be used for (tbd). Info on the different clusters available within UCL is here: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rc&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;docs&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;www.rc.ucl.ac.uk&#x2F;docs&#x2F;</a></li><li><strong>module list</strong> : show the software currently available in your environment.<ul class="bullet"><li><strong>module avail</strong> : show the software that is isntalled on Myriad that you can add to your environment if you want it.</li><li><strong>module load &lt;software&gt;&#x2F;&lt;version&gt;</strong> : load a bit of availble software into your environment, a specific version is optional<ul class="bullet"><li><strong>module load default-modules</strong> : load the modules that are the default ones loaded when you log in.</ul><li><strong>module unload &lt;software&gt; </strong>: remove a bit of software from your environment</li><li><strong>module show &lt;software&gt; </strong>: show more details of what will be laoded with a particular bit of software, including what is inside a bundle</li><li><strong>module purge</strong> : remove all loaded modules in the environment</ul><li>If you want a module to always be loaded when a job is run, you can add the &quot;module load &lt;software&gt;&quot; command to the end of the file at &quot;~&#x2F;.bashrc&quot;; this is useful if you want some modules always loaded, but be aware if this file runs every time you start a job!</li><li>To download the software we are using form github:&nbsp;<ul class="bullet"><li>git clone <a href="https&#x3a;&#x2F;&#x2F;github&#x2e;com&#x2F;lh3&#x2F;seqtk&#x2e;git" rel="noreferrer noopener">https:&#x2F;&#x2F;github.com&#x2F;lh3&#x2F;seqtk.git</a></ul><li><strong>scp</strong> : &#x27;secure copy&#x27; to send files to the HPC and back over the SSH connection (you should run this from your own machine, not logged into Myriad)<ul class="bullet"><li>scp &lt;path to file now&gt; username@remotemachine.address:&lt;location-of-copied-file&gt;</li><li>For example to copy the file thing.txt from your current directory to your home directory on Myriad (where cceasja should be replaced with your username):<ul class="bullet"><li>scp .&#x2F;thing.txt ccaesja@myriad.rc.ucl.ac.uk:~</ul><li>The colon : separating the address of Myriad from the location where you want the file to go can be hard to spot, so be careful with that bit</li><li>To go from your computer to Socrates to Myriad (if you are outside the UCL firewall so can&#x27;t get directly to Myriad):<ul class="bullet"><li>scp -o ProxyJump=socrates.ucl.ac.uk thing.txt username@myriad.rc.ucl.ac.uk:~</li><li>You will be asked for your password twice, once to log in to Socrates, then again to log in to Myriad</li><li>More info here: <a href="https&#x3a;&#x2F;&#x2F;www&#x2e;rc&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;docs&#x2F;howto&#x2F;&#x23;single&#x2d;step&#x2d;logins&#x2d;using&#x2d;tunnelling" rel="noreferrer noopener">https:&#x2F;&#x2F;www.rc.ucl.ac.uk&#x2F;docs&#x2F;howto&#x2F;#single-step-logins-using-tunnelling</a></ul></li></ul><li><strong>tar -czvf foldername&#x2F;&nbsp; compressedfoldername.tar.gz</strong> : compress a folder<ul class="bullet"><li>-c means to compress</li><li>-z means make a gzip file</li><li>-v means verbose (print information about files being compressed)</li><li>-f means you will give it the filename</ul><li><strong>rsync</strong> : another way of copying files like scp, but useful if you want to copy more files or only things that have changed, or if you have a bad internet connection.</li><li><strong>date:</strong> prints out the date and time</li><li><strong>lquota </strong>: see how much disk space you are allocated nad how much of that you have used</li><li><strong>top</strong> : show currently running processes</li><li><strong>kill &lt;processID&gt;</strong> : kill a certail process&nbsp;</ul><br><br><br><br><h2>Exercise</h2><br>You can work through this exercise now and we can help or you can look at it in your own time to practice all teh skills we have learned over the last few days.<br><br><a href="https&#x3a;&#x2F;&#x2F;hackmd&#x2e;io&#x2F;zJ5B227qMTJqZSEEIKmBJFg&#x3f;view" rel="noreferrer noopener">https:&#x2F;&#x2F;hackmd.io&#x2F;zJ5B227qMTJqZSEEIKmBJFg?view</a><br><br><br><br><h3>Questions and comments</h3><br>Please add any questions or comments here<br><br>Cyberduck (tranferring files to and from Myriad and easily viewing files): <a href="https&#x3a;&#x2F;&#x2F;cyberduck&#x2e;io&#x2F;" rel="noreferrer noopener">https:&#x2F;&#x2F;cyberduck.io&#x2F;</a><br><br>Useful link to make a shortcut to accessing Myriad: <a href="https&#x3a;&#x2F;&#x2F;wiki&#x2e;ucl&#x2e;ac&#x2e;uk&#x2F;pages&#x2F;viewpage&#x2e;action&#x3f;spaceKey&#x3d;bill&amp;title&#x3d;Working&#x2b;with&#x2b;the&#x2b;HPC&#x2b;clusters" rel="noreferrer noopener">https:&#x2F;&#x2F;wiki.ucl.ac.uk&#x2F;pages&#x2F;viewpage.action?spaceKey=bill&amp;title=Working+with+the+HPC+clusters</a><br><ul class="bullet"><li>&nbsp;</li><li>&nbsp;</li></ul><br><h2>Feedback from day 3</h2><br>Please give us some feedback here:<br><a href="https&#x3a;&#x2F;&#x2F;ideaboardz&#x2e;com&#x2F;for&#x2F;uclhpcc&#x2d;mar22&#x2F;4371989" rel="noreferrer noopener">https:&#x2F;&#x2F;ideaboardz.com&#x2F;for&#x2F;uclhpcc-mar22&#x2F;4371989</a><br><br>Please let us know&nbsp;<br><ul class="bullet"><li>something that went well today (maybe something you learned that will be very useful to your work)</li><li>something we can improve (maybe something that you found made it more difficult for you to learn, or a command where you got stuck or confused)</ul><br>Press the green plus symbol to add a new note or click on a note to add a +1 to someone else&#x27;s comment.<br><br><h2>Post-workshop survey</h2><br>Please fill in this survey that is similar to the pre-workshop survey in the next day or two so we can evaluate the course and how well we met your requirements.<br><a href="https&#x3a;&#x2F;&#x2F;carpentries&#x2e;typeform&#x2e;com&#x2F;to&#x2F;UgVdRQ&#x3f;slug&#x3d;2022&#x2d;03&#x2d;07&#x2d;ucl&#x2d;online&#x2d;hpcc" rel="noreferrer noopener">https:&#x2F;&#x2F;carpentries.typeform.com&#x2F;to&#x2F;UgVdRQ?slug=2022-03-07-ucl-online-hpcc</a><br>
</body>
</html>
